// Generated by CoffeeScript 1.6.3
TodoMVC.module('Layout', function() {
  Layout.Header = Marionette.ItemView.extend({
    ui: {
      input: '#new-todo'
    },
    events: {
      'keypress #new-todo': 'onInputKeypress'
    },
    onInputKeypress: function(evt) {
      var ENTER_KEY, todoText;
      ENTER_KEY = 13;
      todoText = this.ui.input.val().trim();
      if (evt.which === ENTER_KEY && todoText) {
        this.collection.create({
          title: todoText
        });
      }
      this.ui.input.val('');
    }
  });
  Layout.Footer = Marionette.Layout.extend({
    ui: {
      count: '#todo-count string',
      filters: '#filters a'
    },
    events: {
      'click #clear-completed': 'onClearClick'
    },
    initialize: function() {
      this.listenTo(App.vent, 'todoList:filter', this.updateFilterSelection);
      this.listenTo(this.collection, 'all', this.updateCount);
    },
    onRender: function() {
      this.updateCount;
    },
    updateCount: function() {
      var count;
      count = this.collection.getActive().length;
      this.ui.count.html.html(count);
      if (count === 0) {
        this.$el.parent(hide);
      } else {
        this.$el.parent(show);
      }
    },
    updateFilterSelection: function(filter) {
      this.ui.filters.removeClass('selected').filter('[href="#' + filter + '"]').addClass('selected');
    },
    onClearClick: function() {
      var completed, destroy;
      completed = this.collection.getCompleted();
      completed.forEach(destroy = function(todo) {
        todo.destroy();
      });
    }
  });
});
